# waffle-rookies-18.5-backend-2

readme2는 과제 2의 readme입니다.

<느낀점>
1. "test니까 금방 끝나겠지?" 라고 생각했으나, 그래도 20시간 가량 걸렸습니다. 
2. 생각보다 오류와 api 위반 사항이 많아 반성했습니다..
3. 잘은 모르지만, 실무에 비하면 저희 과제는 정말 간단한 api일 것이라 생각합니다. 그럼에도 이렇게 자잘한 오류들이 많다는 점에서, 실제 개발자가 된다면 test를 아주 엄밀하고, 오랜 시간을 들여 진행해야겠다고 생각했습니다.
4. 다른 기능들은 사실 "와 편리하다!" 라는 생각을 해본 적 없는데, test는 정말 이름에 test만 넣어줘도 알아서 돌리고 오류까지 직관적으로 보여준다는 점에서 무척 편리함을 느꼈습니다.
5. 과제 2때는 시간에 쫒겨 뭐가 뭔지 모르고 작성한 부분이 많았으나, test를 통해 코드가 어떻게 진행되는지 이해하고, 더 깔끔한 방법은 없을 지 고민할 수 있어 좋았습니다.
6. 다만 여전히 제 코드는 깔끔하거나 통일성있지 못하더군요.
7. 모든 사항을 api에 맞추었고, coverage도 체크했습니다. survey를 제외하고 크게 90퍼센트 미만으로 떨어지는 경우는 없어 뿌듯했습니다.
8. 항상 서버 개발은 차분히, 하나하나 이해하며 하는 게 답인 것 같습니다.
9. 좋은 과제, 친절하고 유익한 세미나, 정말 감사드립니다.


<기존 코드 변경 내역>
1. 일부 필드명 변경 : participants -> participant / instructor -> instructors
2. 일부 리턴 값 변경 : 유저 프로필 확인 시(회원가입 혹은 업데이트) 참여자 / 진행자 프로필이 list로 출력 -> 각 시리얼라이저의 리턴 부분을 리스트의 첫 번째 인덱스를 반환하도록 함으로써 딕셔너리 자체를 출력
- 이런 부분이 중요하다 생각했음. 겉으로 보기엔 문제가 없을지라도, API 차원에서 형식을 통일하는 것은 매우 중요할 것 같음 
3. 일부 필드 디폴트값 재설정 : online 기본 값 true와 false 재설정
4. 일부 리스폰스 값 변경 : 진행자가 참여자 프로필 만들면 201 created 출력하도록 바꿈.
5. 시간 validation 방법 변경(아직 미흡) : 시간 확인을 아무리 봐도 serializer 내, datefield 내에서 어떻게 해결해야 할지 모르겠어서, view로 가져와서 정규식 이용해 해결
6. datetime warning 해결 : 치명적인 오류는 아니지만, timezone.now()으로 변경
7. 회원가입 api일부 변경 : 회원가입 시 accepted 여부 설정 가능하게.
8. 세미나에 참여하지 않은 사람이 드랍하면 버그 발생하는 부분 수정
9. update seminar가 validation을 일부만 거치는 오류 : view에서 validation 경로 수정하여 해결
10. update seminar 시 온라인 정보 바뀌지 않음 : 원인 - 값이 존재한다는 의미의 true와 실제 value로서의 true를 혼용했음. != None 으로 변경.
11. 깔끔한 테스트를 위해 boolean값들은 모두 assertEqual에서 assertTrue / assertFalse로 변경
12. get user 시, 진행자가 참여자 프로필 만들어서 참여하면 자신이 생성한 세미나 또한 참여자 프로필에 표시되는 버그: .filter 하나 더 걸어주어 쿼리 제한해서 해결. 

<구현한 내용 정리>
"#" 표시는 직접 쿼리를 받아와서 비교한 부분.
1. 로그인 -> 비밀번호, 아이디 제대로 친 경우 / 제대로 치지 않은 경우 / # 유저 수, 참여자 이름, 진행자 이름 
2. post Participant -> 진행자가 대학 정보 포함한 경우 / 포함하지 않은 경우 / 참여자가 또 신청한 경우 / # 유저 수, 진행자 수, 진행-참여자 생성됐는지(진행자가 참여자 프로필 생성했으니), 진행-참여자 대학 확인
3. post seminar -> 참여자가 만드는 경우(403) / 정보 없는 경우(name/capacity/count/time) 중에 하나 없는 경우 / 정보 틀린 경우 (name, capacity, count, time, online) / 최종 완성 (201) / #유저 수, 세미나 capacity 수, 세미나 이름 확인
4. post seminar user -> 틀린 세미나 아이디 입력하는 경우 / accepted되지 않은 참여자가 신청하는 경우 (403) / 잘못된 role로 신청하는 경우 /이미 맡은 세미나가 있는 진행자가 신청하는 경우 / 제대로 신청하는 경우
/ 이미 참여하는 참여자가 신청하는 경우 / 이미 드랍한 사람이 신청하는 경우 / 참여자가 꽉 찬 세미나에 신청하는 경우  / # 유저 수, # 세미나 기본 정보, #가입한 유저 정보와 연동되는지
5. delete seminar user -> 가입되어있지 않은 사람이 드랍하는 경우 /  진행자가 드랍하는 경우 / 이미 드랍한 사람이 드랍하는 경우 / 성공한 경우 / # 유저세미나 테이블에서 dropped_at과 is_active 반영되었는지
6. put seminar -> 참여자인 경우 / 진행자지만, 해당 세미나 진행자가 아닌 경우 / 정보 틀린 경우 (name, capacity, count, time, online) / 가입한 사람보다 적은 경우 / 최종 완성 (200) / # 변경한 세미나 정보 전부 반영되었는지 
7. get seminar_ id -> 기본정보, 참여자, 진행자가 모두 잘 출력되는지 / 참여자가 드랍한 경우에도 표시 / # 유저 수 세미나 수 확인, # 각 세미나 별 세미나의 유저 수 확인 # 각 세미나별 이름 확인 
8. get seminar -> 참여자 수가 드랍을 고려하여 잘 출력되는지 / 그 외 정보들이 모두 맞는지 / # 유저 수 세미나 수 확인, # 세미나의 참여자 수, 진행자 수 확인 # 세미나 기본 정보 확인
9. get user me -> 참여자 - 세미나 드랍 - 세부사항 잘 출력되는지 / 진행자 - 참여자프로필 생성 - 세미나 생성 - 참여자 프로필로 세미나 참여 - 세부사항 잘 출력되는지  / # 유저 수, 세미나 수 확인, # 각 프로필 정보 제대로 입력되었는지 확인 # 각 프로필과 유저가 제대로 연결되었는지 확인 # 각 유저와 세미나가 제대로 연결되었는지 확인
10. get user me _ id : 9 와 동일.
일부러 다양한 방법으로 접근. 어떤때는 id로, 어떤때는 직접 이름으로 쿼리를 받아왔는데, 오히려 정신없어진듯..


<공부한 내용> 스스로 깨닫거나 알게 된 점 정리해놓은 것으로, 안읽으셔도 됩니다!

1. api가 하나의 약속임을 깨닫고, 최대한 촘촘히 test코드를 작성해 api를 준수할 수 있도록 했다.
2. 작성한 코드를 다시 살펴보며 더 효율적이고 직관적으로 코드를 작성할 수 있는 방법에 대해 고민해보았다.
3. 모든 test case 끼리 독립적이고, 또한 DB에 의존성이 없어야 한다는 등 test시 지켜야 할 규칙들을 파악하고, 이를 기반으로 test를 진행하였다.
4. coverage의 역할을 파악하고, 이를 통해 본인 코드의 로직을 따져보았다.
5. test 과정이 api준수와 코딩 실력 향상 측면에서 필수적임을 깨닫고, 절대 test에 소홀하지 않을 것을 다짐하였다.


